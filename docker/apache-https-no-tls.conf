# docker/ ichida ishga tushiring
cat > apache-https-no-tls.conf <<'EOF'
# --- Added by Docker layer: trust proxy and set logs ---

# If modules are disabled by default, they will simply be ignored.
# (We already enabled rewrite/headers/setenvif in Dockerfile.)

# Trust HTTPS forwarded by Traefik
SetEnvIf X-Forwarded-Proto "https" HTTPS=on
SetEnvIf X-Forwarded-Port  "443"   SERVER_PORT=443

# Real client IP from proxy (works with Traefik)
#LoadModule remoteip_module modules/mod_remoteip.so
#RemoteIPHeader X-Forwarded-For
#RemoteIPTrustedProxy 10.0.0.0/8
#RemoteIPTrustedProxy 172.16.0.0/12
#RemoteIPTrustedProxy 192.168.0.0/16

# Logs (make sure /var/www/logs exists and is writable by apache)
ErrorLog  "/var/www/logs/error.log"
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog "/var/www/logs/access.log" combined

# DO NOT enable SSL here; TLS is terminated at Traefik.
# No SSLCertificateFile / SSLCertificateKeyFile here.
EOF
